<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpotifyLIKE</title>
    <link rel="stylesheet" href="style.css">
    <!-- Load Script First to define Callback -->
    <script src="script.js"></script>
    <!-- Load SDK Second -->
    <script src="https://sdk.scdn.co/spotify-player.js"></script>
</head>
<body>
    <div id="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <svg viewBox="0 0 24 24" width="40" height="40" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.65 14.65c-.19.32-.6.41-.91.23-2.5-1.53-5.65-1.87-9.36-1.03-.35.08-.71-.14-.79-.49-.08-.35.14-.71.49-.79 4.07-.92 7.57-.54 10.34 1.16.31.19.4.6.23.92zm1.32-2.93c-.24.39-.75.52-1.14.28-2.86-1.76-7.21-2.27-10.59-1.24-.43.13-.89-.11-1.02-.54-.13-.43.11-.89.54-1.02 3.86-1.18 8.74-.61 12.03 1.41.38.23.51.74.28 1.11zm.11-3.03c-3.41-2.03-9.05-2.21-12.31-1.22-.52.16-1.07-.13-1.22-.65-.16-.52.13-1.07.65-1.22 3.79-1.15 10.02-.93 13.97 1.42.47.28.62.89.34 1.36-.28.47-.89.62-1.36.34z"/></svg>
                <span>SpotifyLIKE</span>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li id="nav-home" class="active">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                        <span>Home</span>
                    </li>
                    <li id="nav-search">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                        <span>Search</span>
                    </li>
                    <li id="nav-library">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"/></svg>
                        <span>Your Library</span>
                    </li>
                </ul>
            </nav>
            <div class="playlists-nav">
                <div class="section-title-small">PLAYLISTS</div>
                <ul id="sidebar-playlists">
                    <!-- User Playlists injected here -->
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="nav-buttons">
                    <button id="history-back" class="circle-btn">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                    </button>
                    <button id="history-forward" class="circle-btn">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
                    </button>
                </div>
                
                <div class="search-bar" id="search-bar-container">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    <input type="text" id="search-input" placeholder="What do you want to listen to?">
                    <button id="search-btn">Search</button>
                </div>

                <div class="user-menu">
                    <button id="login-btn" class="pill-btn">Log in</button>
                    <div id="user-info" class="hidden" style="display:flex; align-items:center; gap:10px;">
                        <span id="user-name">User</span>
                        <button id="logout-btn" class="pill-btn-small" style="background-color:transparent; border:1px solid #878787;">Log out</button>
                    </div>
                </div>
            </header>

            <!-- Home View -->
            <div id="home-view" class="content-area">
                <div class="section">
                    <h2>Good evening</h2>
                    <div id="home-recent" class="grid-container">
                        <!-- Recently Played injected here -->
                    </div>
                </div>

                <div class="section">
                    <h2>Trending Tracks</h2>
                    <div id="home-trending-tracks" class="track-list">
                        <!-- Trending Tracks injected here -->
                    </div>
                </div>

                <div class="section">
                    <h2>Trending Albums</h2>
                    <div id="home-trending-albums" class="grid-container">
                        <!-- Trending Albums injected here -->
                    </div>
                </div>
                
                <div class="section">
                    <h2>Trending Playlists</h2>
                    <div id="home-trending-playlists" class="grid-container">
                        <!-- Trending Playlists injected here -->
                    </div>
                </div>
            </div>

            <!-- Library View -->
            <div id="library-view" class="content-area hidden">
                <div class="section">
                    <h2>Your Playlists</h2>
                    <div id="library-playlists" class="grid-container">
                        <!-- User Playlists injected here -->
                    </div>
                </div>
            </div>

            <!-- Search View -->
            <div id="search-view" class="content-area">
                <div id="artists-section" class="section hidden">
                    <h2>Artists</h2>
                    <div id="artists-container" class="grid-container">
                        <!-- Artists Results -->
                    </div>
                </div>

                <div id="tracks-section" class="section">
                    <h2>Tracks</h2>
                    <div id="results-container" class="grid-container">
                        <div class="empty-state">
                            Start searching for music to play...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Artist Page View -->
            <div id="artist-view" class="content-area hidden">
                <div class="artist-layout-container">
                    <!-- Left Column: Fixed Artist Info -->
                    <div class="artist-sidebar">
                        <img id="artist-hero-image" src="" alt="">
                        <div class="artist-info-stacked">
                            <span class="verified-badge">Verified Artist</span>
                            <h1 id="artist-name-hero">Artist Name</h1>
                            <span id="artist-fans">0 Fans</span>
                            <div style="margin-top: 16px;">
                                <button id="artist-follow-btn" class="pill-btn-small" style="display:none; border-color:white; font-size: 14px; text-transform:uppercase; letter-spacing:1px; padding: 6px 32px;">Follow</button>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Scrollable Content -->
                    <div class="artist-main-content">
                        <!-- Dynamic Background Overlay -->
                        <div id="artist-background-overlay"></div>
                        
                        <div class="section">
                            <h2>Top Tracks</h2>
                            <div id="artist-top-tracks" class="track-list">
                                <!-- Top Tracks List -->
                            </div>
                        </div>

                        <div class="section">
                            <h2>Discography</h2>
                            <div id="artist-albums" class="grid-container">
                                <!-- Albums Grid -->
                            </div>
                        </div>

                        <div class="section">
                            <h2>Fans Also Like</h2>
                            <div id="artist-related" class="grid-container">
                                <!-- Related Artists Grid -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Album Page View -->
            <div id="album-view" class="content-area hidden">
                <div class="album-header">
                    <img id="album-cover-hero" src="" alt="">
                    <div class="album-info">
                        <span id="album-type">Album</span>
                        <h1 id="album-title-hero">Album Title</h1>
                        <div class="album-meta">
                            <span id="album-artist-name">Artist Name</span> • 
                            <span id="album-year">Year</span> • 
                            <span id="album-track-count">0 songs</span>
                        </div>
                    </div>
                </div>

                <div class="album-actions">
                    <button id="album-play-btn" class="play-circle-large" title="Play Album">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <button id="album-add-btn" class="action-btn" title="Add to Playlist">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    </button>
                </div>

                <div class="section">
                    <div class="track-list-header">
                        <div class="track-number">#</div>
                        <div class="track-title-col">Title</div>
                        <div class="track-duration-col">
                            <svg viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"/><path d="M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"/></svg>
                        </div>
                    </div>
                    <div id="album-tracks-list" class="track-list">
                        <!-- Tracks will be injected here -->
                    </div>
                </div>
            </div>

            <!-- Playlist Page View (Local) -->
            <div id="playlist-view" class="content-area hidden">
                <div class="album-header">
                    <!-- Placeholder Cover -->
                    <div id="playlist-cover-hero" style="width:232px; height:232px; background: #333; display:flex; align-items:center; justify-content:center; box-shadow: 0 4px 60px rgba(0,0,0,0.5);">
                        <svg viewBox="0 0 24 24" width="64" height="64" fill="#b3b3b3"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/></svg>
                    </div>
                    <div class="album-info">
                        <span id="playlist-type">Playlist</span>
                        <h1 id="playlist-title-hero">Playlist Name</h1>
                        <div class="album-meta">
                            <span id="playlist-owner">User</span> • 
                            <span id="playlist-track-count">0 songs</span>
                        </div>
                    </div>
                </div>

                <div class="album-actions">
                    <button id="playlist-play-btn" class="play-circle-large">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <button id="playlist-delete-btn" class="action-btn hidden" title="Delete Playlist" style="border-color: #e91429; color: #e91429;">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                    </button>
                </div>

                <div class="section">
                    <div class="track-list-header">
                        <div class="track-number">#</div>
                        <div class="track-title-col">Title</div>
                        <div class="track-duration-col">
                            <svg viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"/><path d="M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"/></svg>
                        </div>
                    </div>
                    <div id="playlist-tracks-list" class="track-list">
                        <!-- Tracks will be injected here -->
                    </div>
                </div>
            </div>
            <!-- Lyrics View -->
            <div id="lyrics-view" class="content-area hidden">
                <div class="lyrics-container">
                    <div id="lyrics-content" class="lyrics-text">
                        <!-- Lyrics injected here -->
                    </div>
                    <div class="lyrics-footer">
                        Powered by Deezer
                    </div>
                </div>
            </div>
            <!-- Add to Playlist Modal -->
            <div id="playlist-modal" class="modal hidden">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <h2>Add to Playlist</h2>
                    <div class="playlist-actions">
                        <input type="text" id="new-playlist-name" placeholder="New Playlist Name">
                        <button id="create-playlist-btn">Create & Add</button>
                    </div>
                    <div id="playlist-list" class="playlist-list">
                        <!-- Playlists injected here -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Player Footer -->
        <footer>
            <div class="player-left">
                <img id="np-cover" src="https://via.placeholder.com/56" alt="">
                <div class="player-info">
                    <div id="np-title">Not Playing</div>
                    <div id="np-artist">-</div>
                </div>
            </div>

            <div class="player-center">
                <div class="player-controls">
                    <button id="shuffle-btn" class="control-btn" title="Shuffle">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M13.151 16.271l2.136 2.136a1 1 0 001.414 0l4-4a1 1 0 000-1.414l-4-4a1 1 0 10-1.414 1.414L17.586 12.7l-2.95 2.95a1 1 0 101.415 1.415l-2.9-2.794zM5.293 6.707a1 1 0 011.414-1.414l12 12a1 1 0 01-1.414 1.414l-12-12zM3 18v-2h2.5l2.5-2.5 1.5 1.5-4 4H3z"/></svg>
                    </button>
                    <button id="prev-btn" class="control-btn">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                    </button>
                    <button id="play-btn" class="control-btn play-circle">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <button id="next-btn" class="control-btn">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                    </button>
                    <button id="repeat-btn" class="control-btn" title="Repeat">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M0 4.75A3.75 3.75 0 013.75 1h16.5A3.75 3.75 0 0124 4.75v3.5a3.75 3.75 0 01-3.75 3.75H4.81l2.47 2.47a.75.75 0 11-1.06 1.06l-3.75-3.75a.75.75 0 010-1.06l3.75-3.75a.75.75 0 111.06 1.06L4.81 7h15.44a2.25 2.25 0 002.25-2.25v-3.5a2.25 2.25 0 00-2.25-2.25H3.75a2.25 2.25 0 00-2.25 2.25v3.5a.75.75 0 01-1.5 0v-3.5zM20.25 13.25a.75.75 0 01.75.75v3.5a2.25 2.25 0 01-2.25 2.25H3.31l2.47-2.47a.75.75 0 10-1.06-1.06l-3.75 3.75a.75.75 0 000 1.06l3.75 3.75a.75.75 0 101.06-1.06l-2.47-2.47h15.44a3.75 3.75 0 003.75-3.75v-3.5a.75.75 0 01.75-.75z"/></svg>
                    </button>
                </div>
                <div class="playback-bar">
                    <div class="progress-container">
                        <span id="current-time">0:00</span>
                        <div class="progress-bar-bg" id="progress-bar-bg">
                            <div class="progress-bar-fill" id="progress-bar-fill"></div>
                        </div>
                        <span id="total-time">0:00</span>
                    </div>
                </div>
            </div>

            <div class="player-right">
                <button id="lyrics-btn" class="control-btn" title="Lyrics">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M7 6l10 2.5V14H7V6zm-2 2v8h14v-8H5zm2 10h10v2H7v-2z"/></svg>
                </button>
                <button id="queue-btn" class="control-btn" title="Queue">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0-6h18V5H3v2z"/></svg>
                </button>
                <div class="device-container">
                    <button id="device-btn" class="control-btn" title="Devices">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M6 2h12a2 2 0 012 2v16a2 2 0 01-2 2H6a2 2 0 01-2-2V4a2 2 0 012-2zm0 2v16h12V4H6z"/></svg>
                    </button>
                    <div id="device-list" class="device-list-popup hidden">
                        <!-- Devices injected here -->
                    </div>
                </div>
                <div id="device-status">Disconnected</div>
                <div class="volume-container">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12.945 1.379L9.22 6H3v12h6.22l3.725 4.621A1.002 1.002 0 0014.5 21.82V2.18a1 1 0 00-1.555-.8zM13 19.308l-3.033-3.763A1 1 0 009.22 15H4V9h5.22a1 1 0 00.747-.545L13 4.692v14.616zM16.5 12c0-1.78-.96-3.328-2.5-4.08v8.16c1.54-.752 2.5-2.3 2.5-4.08zM14 3.243v2.05c3.273.868 5.5 3.738 5.5 7.207 0 3.47-2.227 6.34-5.5 7.207v2.05c4.35-.904 7.5-4.664 7.5-9.257 0-4.593-3.15-8.353-7.5-9.257z"/></svg>
                    <input type="range" id="volume-slider" min="0" max="100" value="50">
                </div>
            </div>
        </footer>
    </div>
</body>
</html>
